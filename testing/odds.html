<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cricket Odds</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui}
body{background:#0b0f1a;color:#fff;padding:14px}
h1{text-align:center;margin-bottom:14px}

.card{
  background:linear-gradient(145deg,#151c30,#0f1424);
  border-radius:16px;
  padding:14px;
  margin-bottom:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.45);
  cursor:pointer;
}
.league{font-size:13px;opacity:.8}
.match{font-size:17px;font-weight:800;margin:6px 0 10px}

.runner{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#0e1527;
  padding:10px 12px;
  border-radius:12px;
  margin-top:6px;
}
.name{font-size:14px;font-weight:600}

.odd{
  padding:6px 10px;
  border-radius:8px;
  font-weight:800;
  min-width:50px;
  text-align:center;
}
.back{background:#00ff88;color:#000}
.lay{background:#ff4d4d}

.status{
  margin-top:8px;
  font-size:12px;
  opacity:.75;
}
.win{color:#00ff88}
.lose{color:#ff4d4d}
.suspend{color:#ffaa00}
</style>
</head>

<body>

<h1>üèè Cricket Odds</h1>
<div id="matches">Loading‚Ä¶</div>

<script>
const API = "https://central.zplay1.in/pb/api/v1/events/matches/4";

function openMatch(eventId){
  location.href = "match.html?eventId=" + eventId;
}

fetch(API)
.then(r=>r.json())
.then(d=>{
  const matches = d.data || [];
  const box = document.getElementById("matches");
  box.innerHTML = "";

  matches.forEach(m=>{
    let runnersHTML = "";

    if (m.runners && m.runners.length) {
      m.runners.forEach(r=>{
        const name =
          m.runnerNames?.find(x=>x.SID===r.sid)?.RN || "Runner";

        if (r.ex?.b?.length || r.ex?.l?.length) {
          const back = r.ex.b?.[0]?.p;
          const lay  = r.ex.l?.[0]?.p;

          runnersHTML += `
            <div class="runner">
              <div class="name">${name}</div>
              <div>
                ${back ? `<span class="odd back">${back}</span>` : ""}
                ${lay ? `<span class="odd lay">${lay}</span>` : ""}
              </div>
            </div>`;
        } else {
          let statusClass = "suspend";
          if (r.s === "WINNER") statusClass = "win";
          if (r.s === "LOSER") statusClass = "lose";

          runnersHTML += `
            <div class="runner">
              <div class="name">${name}</div>
              <div class="status ${statusClass}">${r.s || "NO ODDS"}</div>
            </div>`;
        }
      });
    } else {
      runnersHTML = `<div class="status suspend">No odds yet</div>`;
    }

    box.innerHTML += `
      <div class="card" onclick="openMatch(${m.event_id})">
        <div class="league">${m.league_name}</div>
        <div class="match">${m.event_name}</div>
        ${runnersHTML}
        <div class="status">Market: ${m.status || "N/A"}</div>
      </div>`;
  });
});
</script>

</body>
</html>
