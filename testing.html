<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stream</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    background: #ffffff;
    width: 100%;
    height: 100%;
}

.wrapper {
    width: 100%;
    max-width: 960px;
    margin: 0 auto;
    position: relative;
    padding-top: 56.25%; /* 16:9 */
    background: #ffffff;
}

.wrapper iframe {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    border: 0;
}
</style>
</head>

<body>

<div class="wrapper" id="player"></div>

<script>
(async () => {
    try {
        const res = await fetch("https://allrounderlive.pages.dev/id.json");
        if (!res.ok) throw new Error("JSON fetch failed");

        const data = await res.json();

        const params = new URLSearchParams(window.location.search);
        const id = params.get("id");

        const stream = data.iframes.find(x => x.id === id);

        if (!stream) throw new Error("Invalid ID");

        document.getElementById("player").innerHTML = `
            <iframe
                src="${stream.iframeSrc}"
                allow="autoplay; encrypted-media"
                allowfullscreen>
            </iframe>
        `;
    } catch (e) {
        document.body.innerHTML = "<h3 style='text-align:center;margin-top:40px;'>Stream not found</h3>";
    }
})();
</script>

</body>
</html>
