<!DOCTYPE html>
<html lang="en">
<head>
  <title>Fox Cricket</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
  <meta name="referrer" content="no-referrer"/>
  
  <!-- EXTREME BLOCKING SCRIPT - No Mercy -->
  <script>
    // IMMEDIATE EXECUTION - Nothing loads if blocked
    (function() {
      'use strict';
      
      // DOMAINS TO BLOCK - ALL FORMS
      const BLOCKED_DOMAINS = [
        'skcricweb.pages.dev',
        'insiderlivehd.pages.dev',
        'mahirat.netlify.app',
        'sportseera.pages.dev',
        // Also block common variations
        'skcricweb',
        'insiderlivehd',
        'mahirat',
        'sportseera'
      ];
      
      // CURRENT URL INFO
      const currentURL = window.location.href;
      const currentHostname = window.location.hostname;
      const referrer = document.referrer;
      
      // AGGRESSIVE DOMAIN CHECKING
      function isBlocked(text) {
        if (!text) return false;
        const textLower = text.toLowerCase();
        
        for (const domain of BLOCKED_DOMAINS) {
          if (textLower.includes(domain.toLowerCase())) {
            return true;
          }
        }
        return false;
      }
      
      // METHOD 1: Check current URL
      if (isBlocked(currentURL) || isBlocked(currentHostname)) {
        showBlockPage('DIRECT_BLOCK', currentHostname);
        return;
      }
      
      // METHOD 2: Check if we're in an iframe
      let isInIframe = false;
      try {
        isInIframe = window.self !== window.top;
      } catch (e) {
        isInIframe = true;
      }
      
      // METHOD 3: If in iframe, BLOCK BY DEFAULT unless we can verify it's allowed
      if (isInIframe) {
        // Try to check parent
        try {
          const parentURL = window.parent.location.href;
          const parentHostname = window.parent.location.hostname;
          
          if (isBlocked(parentURL) || isBlocked(parentHostname)) {
            showBlockPage('IFRAME_PARENT_BLOCK', parentHostname);
            return;
          }
        } catch (e) {
          // Cross-origin error - can't access parent
          // This is SUSPICIOUS - block it!
          showBlockPage('CROSS_ORIGIN_IFRAME', 'Unknown (Cross-origin)');
          return;
        }
      }
      
      // METHOD 4: Check referrer
      if (referrer && isBlocked(referrer)) {
        showBlockPage('REFERRER_BLOCK', referrer);
        return;
      }
      
      // METHOD 5: Check URL parameters for blocked domains
      const urlParams = window.location.search;
      if (urlParams && isBlocked(urlParams)) {
        showBlockPage('URL_PARAMS_BLOCK', urlParams);
        return;
      }
      
      // METHOD 6: Check document.title and other metadata
      if (document.title && isBlocked(document.title)) {
        showBlockPage('TITLE_BLOCK', document.title);
        return;
      }
      
      // If we reach here, access is allowed
      console.log('âœ… Access granted to:', currentHostname);
      
      // Block page function
      function showBlockPage(reason, blockedInfo) {
        // COMPLETELY DESTROY THE PAGE
        document.documentElement.innerHTML = '';
        
        // Create new HTML
        const html = `<!DOCTYPE html>
        <html>
        <head>
          <title>Access Blocked</title>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body {
              font-family: Arial, sans-serif;
              background: #000;
              color: #fff;
              height: 100vh;
              display: flex;
              align-items: center;
              justify-content: center;
              text-align: center;
              padding: 20px;
            }
            .block-screen {
              border: 4px solid #ff0000;
              border-radius: 15px;
              padding: 50px 30px;
              background: rgba(20, 20, 20, 0.95);
              max-width: 600px;
              width: 100%;
              box-shadow: 0 0 60px rgba(255, 0, 0, 0.4);
            }
            .block-icon {
              font-size: 80px;
              color: #ff0000;
              margin-bottom: 20px;
            }
            h1 {
              color: #ff0000;
              margin-bottom: 20px;
              font-size: 32px;
            }
            .block-details {
              background: rgba(255, 0, 0, 0.1);
              padding: 20px;
              margin: 25px 0;
              border-radius: 10px;
              border-left: 5px solid #ff0000;
              text-align: left;
              font-family: monospace;
              font-size: 14px;
              word-break: break-all;
            }
            .brand {
              margin-top: 30px;
              font-size: 28px;
              color: #00ff00;
              font-weight: bold;
              text-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
            }
            .notice {
              color: #aaa;
              font-size: 14px;
              margin-top: 15px;
            }
          </style>
        </head>
        <body>
          <div class="block-screen">
            <div class="block-icon">ðŸš«</div>
            <h1>CONTENT BLOCKED</h1>
            <p>This content is protected and cannot be accessed from unauthorized sources.</p>
            
            <div class="block-details">
              <strong>Block Reason:</strong> ${getReasonText(reason)}<br>
              <strong>Blocked Source:</strong> ${blockedInfo}<br>
              <strong>Your URL:</strong> ${currentURL}
            </div>
            
            <p>Please access content directly from authorized sources only.</p>
            
            <div class="brand">REMEMBER DILLZY</div>
            <div class="notice">All rights reserved | Unauthorized embedding prohibited</div>
          </div>
        </body>
        </html>`;
        
        // Write the new page
        document.open();
        document.write(html);
        document.close();
        
        // Stop all execution
        if (window.stop) window.stop();
        window.location && (window.location.href = 'about:blank');
        throw new Error('ACCESS_BLOCKED');
      }
      
      function getReasonText(reason) {
        const reasons = {
          'DIRECT_BLOCK': 'Direct access from blocked domain',
          'IFRAME_PARENT_BLOCK': 'Embedded in iframe from blocked site',
          'CROSS_ORIGIN_IFRAME': 'Cross-origin iframe detected (suspicious)',
          'REFERRER_BLOCK': 'Redirected from blocked domain',
          'URL_PARAMS_BLOCK': 'URL contains blocked domain parameters',
          'TITLE_BLOCK': 'Page title contains blocked domain'
        };
        return reasons[reason] || 'Unauthorized access';
      }
      
    })();
  </script>

  <!-- Resources will only load if not blocked -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css"/>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.polyfilled.js"></script>

  <style>
    /* Your existing styles */
    body {
      background-color: #000;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    html, body {
      height: 100%;
      width: 100%;
    }
    .video-container {
      position: relative;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    video {
      width: 100%;
      height: 100%;
      object-fit: contain;
      background: #000;
    }
    .plyr {
      height: 100%;
      width: 100%;
    }
    #visitor-counter {
      position: fixed;
      opacity: 0;
      pointer-events: none;
      z-index: -1;
    }
    #capture-preview {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
      z-index: 10000;
      display: none;
      max-width: 85%;
      max-height: 85%;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    #capture-preview.show {
      display: block;
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
      transition: all 0.3s ease;
    }
    .preview-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      color: #4CAF50;
      font-size: 16px;
      font-weight: 600;
    }
    .image-wrapper {
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }
    #captured-image {
      max-width: 100%;
      max-height: 65vh;
      display: block;
    }
    .info {
      color: #888;
      text-align: center;
      margin-top: 16px;
      font-size: 13px;
    }
    .plyr__controls button[data-plyr="capture"] {
      padding: 7px;
    }
    .plyr__controls button[data-plyr="capture"] svg {
      width: 18px;
      height: 18px;
      fill: currentColor;
    }
  </style>
</head>
<body>

  <div class="video-container">
    <video autoplay playsinline muted id="player" controls preload="metadata"></video>
  </div>

  <div id="capture-preview">
    <div class="preview-header">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="#4CAF50"/>
      </svg>
      <span>Frame Captured Successfully</span>
    </div>
    <div class="image-wrapper">
      <img id="captured-image" alt="Captured Frame">
    </div>
    <div class="info">Image downloaded automatically</div>
  </div>

  <div id="visitor-counter">
    <div id="sfcf9a543mw181dpyf921tw7rfrwz5bx28z"></div>
    <script src="https://counter1.optistats.ovh/private/counter.js?c=f9a543mw181dpyf921tw7rfrwz5bx28z&down=async" async></script>
  </div>

  <script>
    // Only initialize if not blocked
    if (!document.querySelector('.block-screen')) {
      
      function captureFrame() {
        try {
          const video = document.getElementById("player");
          if (!video) return;
          
          const canvas = document.createElement('canvas');
          canvas.width = video.videoWidth;
          canvas.height = video.videoHeight;
          const ctx = canvas.getContext('2d');
          ctx.drawImage(video, 0, 0);
          
          canvas.toBlob(function(blob) {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'screenshot-' + Date.now() + '.png';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            // Show preview
            const preview = document.getElementById('capture-preview');
            const img = document.getElementById('captured-image');
            img.src = url;
            preview.classList.add('show');
            
            setTimeout(() => {
              preview.classList.remove('show');
              URL.revokeObjectURL(url);
            }, 2500);
          }, 'image/png');
        } catch (e) {
          console.error('Capture error:', e);
        }
      }

      document.addEventListener("DOMContentLoaded", function() {
        const params = new URLSearchParams(window.location.search);
        const streamUrl = params.get("url") || "https://rumble.com/live-hls-dvr/6z4aec/playlist.m3u8?level=1";
        const video = document.getElementById("player");

        const playerOptions = {
          autoplay: true,
          controls: ['play', 'progress', 'current-time', 'mute', 'volume', 'settings', 'fullscreen'],
          settings: ['quality']
        };

        if (Hls.isSupported()) {
          const hls = new Hls();
          hls.loadSource(streamUrl);
          hls.attachMedia(video);
          hls.on(Hls.Events.MANIFEST_PARSED, function() {
            const player = new Plyr(video, playerOptions);
            player.on('ready', function() {
              // Add capture button
              const controls = document.querySelector('.plyr__controls');
              if (controls) {
                const captureBtn = document.createElement('button');
                captureBtn.className = 'plyr__controls__item plyr__control';
                captureBtn.setAttribute('data-plyr', 'capture');
                captureBtn.innerHTML = `
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                  </svg>
                `;
                captureBtn.onclick = captureFrame;
                
                const fullscreenBtn = controls.querySelector('[data-plyr="fullscreen"]');
                if (fullscreenBtn) {
                  controls.insertBefore(captureBtn, fullscreenBtn);
                } else {
                  controls.appendChild(captureBtn);
                }
              }
            });
          });
        } else if (video.canPlayType("application/vnd.apple.mpegurl")) {
          video.src = streamUrl;
          const player = new Plyr(video, playerOptions);
          player.on('ready', function() {
            // Add capture button
            const controls = document.querySelector('.plyr__controls');
            if (controls) {
              const captureBtn = document.createElement('button');
              captureBtn.className = 'plyr__controls__item plyr__control';
              captureBtn.setAttribute('data-plyr', 'capture');
              captureBtn.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
                </svg>
              `;
              captureBtn.onclick = captureFrame;
              
              const fullscreenBtn = controls.querySelector('[data-plyr="fullscreen"]');
              if (fullscreenBtn) {
                controls.insertBefore(captureBtn, fullscreenBtn);
              } else {
                controls.appendChild(captureBtn);
              }
            }
          });
        }
      });
      
    } else {
      console.log('Page blocked - player not initialized');
    }
  </script>

</body>
</html>
