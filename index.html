<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Allrounder</title>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FMP9REY96D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FMP9REY96D');
</script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
body {
  background: #000;
  font-family: Arial, sans-serif;
  padding-bottom: 20px; /* Adds spacing at the bottom */
}
header {
  position: fixed; top:0; left:0; width:100%; height:60px;
  background:rgba(0,0,0,1); display:flex; align-items:center;
  z-index:1000; border-bottom:1px solid rgba(255,255,255,0.5);
  transition: background-color 0.3s, transform 0.3s;
}
header.scrolled { background-color: rgba(0,0,0,0.6); }

.logo { height:80%; display:flex; align-items:center; transition: transform 0.3s ease; margin-left:15px; }
.logo img { height:100%; width:auto; }

/* Skeleton Loader Styles */
.skeleton {
  background: linear-gradient(90deg, #1a1a1a 25%, #222 50%, #1a1a1a 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
  border-radius: 8px;
}

.skeleton-card {
  aspect-ratio: 16/9;
  border-radius: 12px;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Skeleton containers */
#posterSlider.skeleton-container,
#todayEventsSlider.skeleton-container,
#upcomingCarousel.skeleton-container,
#fancodeContainer.skeleton-container,
#highlightContainer.skeleton-container,
#matches.skeleton-container,
#newHighlightsContainer.skeleton-container {
  display: flex;
  gap: 15px;
  overflow-x: hidden;
}

#posterSlider.skeleton-container {
  padding: 15px 15px 15px 15px;
}

#todayEventsSlider.skeleton-container {
  padding: 0 15px;
}

#matches.skeleton-container {
  padding: 10px 15px;
}

#newHighlightsContainer.skeleton-container {
  padding: 10px 15px;
}

/* Slow horizontal scroll animation */
@keyframes slowHorizontalScroll {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(calc(-100% + 100vw));
  }
}

.auto-scroll-container {
  display: flex;
  gap: 15px;
  animation: slowHorizontalScroll 60s linear infinite;
  padding: 10px 0;
}

.auto-scroll-container:hover {
  animation-play-state: paused;
}

.slider-wrapper { padding-top:70px; position:relative; overflow:hidden; }
.slider {
  display:flex; overflow-x:auto; gap:20px;
  padding:15px 15px 15px 15px; cursor:grab;
  scroll-behavior:smooth; -webkit-overflow-scrolling:touch;
  scroll-snap-type: x mandatory; /* Added for snap scrolling */
}
.slider:active { cursor:grabbing; }

.poster-card {
  position: relative;
  flex: 0 0 auto;
  width: 90vw;          
  max-width: 600px;     
  aspect-ratio: 16/9;
  border-radius: 12px;
  overflow: hidden;
  background: #111;
  transition: transform 0.3s;
  margin-left: 0;
  scroll-snap-align: center; /* Added for snap scrolling */
}
.poster-card:first-child { margin-left:0; }
.poster-card:hover { transform: scale(1.05); }
.upcoming-carousel-container {
  overflow-x: auto;
  padding: 0 15px 20px 15px;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x mandatory; /* Added for snap scrolling */
}

.upcoming-carousel-container::-webkit-scrollbar {
  display: none;
}
.upcoming-carousel {
  display: flex;
  gap: 15px;
}

.upcoming-carousel .upcoming-card:first-child {
  margin-left: 0;
}
.upcoming-card {
  flex: 0 0 280px;
  aspect-ratio: 16/9;
  position: relative;
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.3s;
  background: #111;
  scroll-snap-align: center; /* Added for snap scrolling */
}

.upcoming-card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  transition: filter 0.3s;
  border-radius: 12px;
}

.upcoming-gradient {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 40%;
  background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
  pointer-events: none;
  transition: opacity 0.3s;
}

.upcoming-info {
  position: absolute;
  bottom: 10px;
  left: 15px;
  color: #fff;
  font-weight: bold;
  font-size: 0.9rem;
  text-shadow: 1px 1px 4px rgba(0,0,0,0.7);
  z-index: 2;
  line-height: 1.2;
}

.upcoming-info .teams { display: block; }
.upcoming-info .datetime { display: block; font-weight: 300; font-size: 0.85rem; }

.upcoming-card.active img { filter: blur(5px); }
.upcoming-card.active .upcoming-overlay {
  opacity: 1;
  pointer-events: auto;
}

.upcoming-card.active .upcoming-info,
.upcoming-card.active .upcoming-gradient {
  opacity: 0;
}

.upcoming-overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.85);
  color: #ccc;
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding: 15px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
  font-family: 'Lato', sans-serif;
  font-size: 0.95rem;
  font-weight: 300;
}

.upcoming-overlay p { margin: 5px 0; }
.upcoming-overlay .title {
  color: #2196F3;
  font-weight: 700;
  font-size: 1.1rem;
  margin-bottom: 10px;
  text-shadow: 1px 1px 5px rgba(0,0,0,0.8);
}


/* Today Events Section */
#today-events-section {
  margin-top: 12px;
  width: 100%;
  overflow: hidden;
}

#today-events-section .section-title {
  font-size: 1.2rem;
  font-weight: 800;
  color: #fff;
  margin: 0 0 8px 15px;
  padding: 0;
}

#today-events-section .slider-wrapper {
  padding-top: 0;
  width: 100%;
}

#today-events-section .slider {
  display: flex;
  overflow-x: auto;
  gap: 15px;
  padding: 0 15px;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  width: 100%;
  scroll-snap-type: x mandatory; /* Added for snap scrolling */
}

#today-events-section .slider::-webkit-scrollbar {
  display: none;
}

#today-events-section .poster-card {
  position: relative;
  flex: 0 0 auto;
  width: 260px;
  aspect-ratio: 16/9;
  border-radius: 10px;
  overflow: hidden;
  background: #111;
  transition: transform 0.3s;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  scroll-snap-align: center; /* Added for snap scrolling */
}

/* Remove left gradient that was appearing on the side */
#today-events-section .poster-card::before {
  display: none;
}

#today-events-section .poster-card:first-child {
  margin-left: 0;
}

#today-events-section .poster-card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 10px;
}

#today-events-section .poster-card:hover {
  transform: scale(1.03);
}

/* Live indicator */
#today-events-section .live-indicator {
  position: absolute;
  top: 8px;
  left: 8px;
  background: red;
  color: white;
  font-size: 0.65rem;
  font-weight: bold;
  padding: 3px 8px;
  border-radius: 5px;
  animation: blink 1s infinite;
  z-index: 3;
}

@keyframes blink {
  50% {
    opacity: 0.7;
  }
}

/* Bottom gradient overlay - FIXED POSITION */
#today-events-section .poster-card::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 40%;
  background: linear-gradient(to top, rgba(0,0,0,0.9), rgba(0,0,0,0.2), transparent);
  pointer-events: none;
  border-radius: 0 0 10px 10px;
  z-index: 2;
}

/* Highlights section */
.highlight-card {
  position: relative;
  flex: 0 0 260px;
  max-width: 260px;
  aspect-ratio: 16/9;
  border-radius: 12px;
  overflow: hidden;
  background: #222;
  cursor: pointer;
  scroll-snap-align: start;
  box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  transition: transform 0.3s;
}
.highlight-card:hover { transform: scale(1.05); }

.highlight-card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.gradient {
  position: absolute;
  bottom: 0; left: 0;
  width: 100%; height: 40%;
  background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
}

.highlight-title {
  position: absolute;
  bottom: 8px;
  left: 10px;
  right: 10px;
  font-size: 0.95rem;
  font-weight: 700;
  color: #fff;
  text-shadow: 1px 1px 4px rgba(0,0,0,0.9);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.poster-card img.poster-img { width:100%; height:100%; object-fit:cover; display:block; border-radius:12px; box-shadow: 0 0 6px rgba(255,255,255,0.05);}
.poster-card img.title-img {
  position:absolute; bottom:10px; left:-10px; width:200px; height:200px;
  object-fit:contain; z-index:2; pointer-events:none;
  box-shadow:0 12px 28px rgba(0,0,0,0.7);
}
/* Fancode Section Styles */
#fancode-section {
  margin-top: 12px;
}

#fancode-section h2 {
  color: #ff4500;
  margin: 0 0 8px 15px;
  font-size: 1.2rem;
  font-weight: bold;
}

#fancode-section .scroll-container {
  display: flex;
  overflow-x: auto;
  gap: 15px;
  padding: 0 15px 15px 15px;
  scroll-behavior: smooth;
  -ms-overflow-style: none;
  scrollbar-width: none;
  scroll-snap-type: x mandatory; /* Added for snap scrolling */
}

#fancode-section .scroll-container::-webkit-scrollbar {
  display: none;
}

#fancode-section .card {
  position: relative;
  min-width: 220px;
  border-radius: 12px;
  overflow: hidden;
  flex-shrink: 0;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  transition: transform 0.3s ease;
  scroll-snap-align: center; /* Added for snap scrolling */
}

#fancode-section .card:first-child {
  margin-left: 0;
}

#fancode-section .card:hover {
  transform: scale(1.03);
}

#fancode-section .card img {
  width: 100%;
  height: 180px;
  object-fit: cover;
  display: block;
}

#fancode-section .card-title {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
  padding: 8px;
  font-size: 0.9rem;
  font-weight: bold;
  color: #fff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Enhanced Live Badge with Pulse and Glow */
#fancode-section .live-badge {
  position: absolute;
  top: 8px;
  left: 8px;
  background: #ff0000;
  color: #fff;
  padding: 4px 8px;
  font-size: 0.75rem;
  font-weight: 800;
  border-radius: 4px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  z-index: 2;
  box-shadow: 0 0 10px rgba(255, 0, 0, 0.7);
  animation: pulse 2s infinite, glow 1.5s infinite alternate;
}

@keyframes pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes glow {
  0% {
    box-shadow: 0 0 5px rgba(255, 0, 0, 0.7);
  }
  100% {
    box-shadow: 0 0 15px rgba(255, 0, 0, 0.9), 0 0 25px rgba(255, 50, 50, 0.6);
  }
}

#fancode-section .premium-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  color: #ffd700;
  font-weight: 900;
  padding: 4px 8px;
  font-size: 0.75rem;
  text-shadow: 0 0 6px #ffd700, 0 0 10px #ffae00;
  border-radius: 4px;
  background: rgba(0, 0, 0, 0.5);
  z-index: 2;
}

#fancode-section .view-all-card {
  min-width: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #ff4500;
  border-radius: 12px;
  font-weight: bold;
  color: #fff;
  cursor: pointer;
  flex-shrink: 0;
  font-size: 0.9rem;
  transition: transform 0.2s ease;
  scroll-snap-align: center; /* Added for snap scrolling */
}

#fancode-section .view-all-card:hover {
  transform: scale(1.05);
}
.team-score { 
  font-size:0.75rem; 
  color:#ccc; 
  line-height:1.2; 
  font-weight: bold;
}
.poster-meta-left {
  position:absolute; left:15px; bottom:70px; color:#fff;
  font-size:14px; font-weight:500; z-index:2; pointer-events:none; line-height:1.4;
}
.watch-btn {
  position:absolute; bottom:20px; left:20px;
  padding:10px 18px; font-weight:bold; border-radius:12px;
  border:none; color:#fff; background-color:#ff4500;
  box-shadow:0 8px 20px rgba(0,0,0,0.6); cursor:pointer;
  font-size:16px; z-index:2; transition: transform 0.2s ease;
}
.scroll-container { 
  display: flex; 
  gap: 15px; 
  overflow-x: auto; 
  padding: 0 15px 15px 15px; 
  scroll-behavior: smooth; 
  scrollbar-width: none; 
  scroll-snap-type: x mandatory; /* Added for snap scrolling */
}
.scroll-container::-webkit-scrollbar { display: none; }

.match-card { 
  flex: 0 0 280px;
  max-width: 280px; 
  aspect-ratio:16/9;
  background: linear-gradient(145deg, #1f1f1f, #2c2c2c);
  border-radius:12px; 
  box-shadow:0 6px 16px rgba(0,0,0,0.7);
  padding:10px; 
  display:flex; 
  flex-direction:column; 
  justify-content:space-between; 
  transition: transform 0.3s, box-shadow 0.3s; 
  scroll-snap-align: center; /* Added for snap scrolling */
}
.match-card:hover { transform: translateY(-5px); box-shadow:0 10px 24px rgba(0,0,0,0.85); }

.match-header { text-align:center; margin-bottom:8px; }
.match-header strong { font-size:0.95rem; color:#fff; }
.match-header div { font-size:0.8rem; color:#bbb; }

.status { display:inline-flex; align-items:center; gap:6px; margin-top:6px; font-size:0.75rem; padding:3px 8px; border-radius:10px; font-weight:bold; }
.status.live { background:#ff1744; color:#fff; }
.status.ended { background:#ff9800; color:#fff; }
.status.upcoming { background:#4CAF50; color:#fff; }

.teams { display:flex; justify-content:space-between; align-items:center; margin-top:8px; gap:10px; }
.team { flex:1; text-align:center; padding:6px; border-radius:10px; background: rgba(255,255,255,0.05); box-shadow: inset 0 0 5px rgba(255,255,255,0.05);}
.team img { width:60px; height:40px; margin-bottom:4px; border-radius:4px; object-fit:contain; background:#fff; }
.team-name { font-size:0.8rem; font-weight:bold; color:#f0f0f0; margin-bottom:2px; }
.team-score { font-size:0.75rem; color:#ccc; line-height:1.2; }
.watch-btn:hover { transform: scale(1.05); }

.modal {
  display:flex; opacity:0; visibility:hidden;
  position:fixed; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);
  justify-content:center; align-items:center; z-index:2000;
  transition: opacity 0.3s, visibility 0.3s;
}
.modal.show { opacity:1; visibility:visible; }

.modal-content {
  background:#111; padding:25px 30px; border-radius:20px;
  width:360px; max-width:90%; text-align:center;
  transform:scale(0.9); transition: transform 0.3s;
}
.modal.show .modal-content { transform: scale(1); }

.modal-content h3 { margin-bottom:20px; font-size:22px; color:#fff; }
.modal-content .channel-btn {
  display:block; width:100%; padding:14px 0; margin:10px 0;
  background-color:#ff4500; color:#fff; font-weight:bold;
  border:none; border-radius:12px; cursor:pointer;
  box-shadow:0 8px 20px rgba(0,0,0,0.6); transition: transform 0.2s ease;
}
.modal-content .channel-btn:hover { transform:scale(1.05); }
.modal-content .close-btn {
  margin-top:15px; padding:12px 20px;
  background:#555; color:#fff; border:none; border-radius:12px;
  cursor:pointer; font-weight:bold; transition: transform 0.2s ease;
}
* {
  -webkit-tap-highlight-color: transparent;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.modal-content .close-btn:hover { transform:scale(1.05); }

.slider::-webkit-scrollbar { display:none; }
.slider { -ms-overflow-style:none; scrollbar-width:none; }

.poster-card::before {
  content:""; position:absolute; top:0; left:0; width:40%; height:100%;
  background:linear-gradient(to right, rgba(0,0,0,1), transparent);
  pointer-events:none; z-index:1;
}

.slider-dots { display:flex; justify-content:center; margin-top:15px; gap:8px; }
.dot { width:10px; height:10px; border-radius:50%; background-color:rgba(255,255,255,0.3); cursor:pointer; transition:0.3s;}
.dot.active { background-color:#ff4500; transform:scale(1.2);}

/* Premium Load More Card */
.load-more-card {
  background: linear-gradient(135deg, #0f172a, #020617) !important;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 2px solid transparent;
  position: relative;
  overflow: hidden;
  scroll-snap-align: center; /* Added for snap scrolling */
}

.load-more-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(56, 189, 248, 0.2), transparent);
  transition: left 0.7s;
}

.load-more-card:hover::before {
  left: 100%;
}

.load-more-card:hover {
  transform: scale(1.05);
  border-color: #38bdf8;
  box-shadow: 0 0 20px rgba(56, 189, 248, 0.3);
  background: linear-gradient(135deg, #1e293b, #0f172a) !important;
}

.load-more-icon {
  font-size: 2rem;
  color: #38bdf8;
  margin-bottom: 10px;
  transition: transform 0.3s;
}

.load-more-card:hover .load-more-icon {
  transform: translateY(-5px);
}

.load-more-text {
  font-weight: 800;
  color: #38bdf8;
  font-size: 0.9rem;
  margin-bottom: 5px;
}

.load-more-subtext {
  font-size: 0.7rem;
  opacity: 0.7;
  color: #94a3b8;
}

/* Section spacing */
section {
  margin-top: 12px;
}

/* Premium scroll indicator */
.scroll-container {
  position: relative;
}

.scroll-container::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 60px;
  height: 100%;
  background: linear-gradient(to right, transparent, rgba(0,0,0,0.7));
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s;
}

.scroll-container:hover::after {
  opacity: 1;
}
</style>
</head>
<body>

<header>
  <div class="logo"><img src="https://allrounderlive.pages.dev/logo.png" alt="Logo"></div>
</header>

<div class="slider-wrapper">
  <!-- Skeleton for poster slider -->
  <div class="slider skeleton-container" id="posterSlider">
    <div class="skeleton skeleton-card" style="width: 90vw; max-width: 600px; margin-left: 0;"></div>
    <div class="skeleton skeleton-card" style="width: 90vw; max-width: 600px;"></div>
    <div class="skeleton skeleton-card" style="width: 90vw; max-width: 600px;"></div>
  </div>
  <div class="slider-dots" id="sliderDots"></div>
</div>

<section id="scoreboard-section">
  <h2 style="font-size:1.2rem; font-weight:bold; color:#fff; margin:0 0 8px 15px;">Asia Cup</h2>

  <!-- Skeleton for match cards -->
  <div class="scroll-container skeleton-container" id="matches">
    <div class="skeleton skeleton-card" style="flex: 0 0 280px;"></div>
    <div class="skeleton skeleton-card" style="flex: 0 0 280px;"></div>
    <div class="skeleton skeleton-card" style="flex: 0 0 280px;"></div>
    <div class="skeleton skeleton-card" style="flex: 0 0 280px;"></div>
  </div>
</section>

<section id="today-events-section">
  <h2 class="section-title">Today Events</h2>
  <div class="slider-wrapper">
    <!-- Skeleton for today events -->
    <div class="slider skeleton-container" id="todayEventsSlider">
      <div class="skeleton skeleton-card" style="width: 260px;"></div>
      <div class="skeleton skeleton-card" style="width: 260px;"></div>
      <div class="skeleton skeleton-card" style="width: 260px;"></div>
      <div class="skeleton skeleton-card" style="width: 260px;"></div>
    </div>
  </div>
</section>

<section id="upcoming-section">
  <h2 style="font-size:1.2rem; font-weight:bold; color:#fff; margin:0 0 8px 15px;">Upcoming Matches</h2>
  <div class="upcoming-carousel-container">
    <!-- Skeleton for upcoming matches -->
    <div class="upcoming-carousel skeleton-container" id="upcomingCarousel">
      <div class="skeleton skeleton-card" style="flex: 0 0 280px;"></div>
      <div class="skeleton skeleton-card" style="flex: 0 0 280px;"></div>
      <div class="skeleton skeleton-card" style="flex: 0 0 280px;"></div>
      <div class="skeleton skeleton-card" style="flex: 0 0 280px;"></div>
    </div>
  </div>
</section>

<section id="fancode-section">
  <h2 style="font-size:1.2rem; font-weight:bold; color:#fff; margin:0 0 8px 15px;">Fancode Live</h2>
  <!-- Skeleton for fancode matches -->
  <div class="scroll-container skeleton-container" id="fancodeContainer">
    <div class="skeleton skeleton-card" style="min-width: 220px; height: 180px;"></div>
    <div class="skeleton skeleton-card" style="min-width: 220px; height: 180px;"></div>
    <div class="skeleton skeleton-card" style="min-width: 220px; height: 180px;"></div>
    <div class="skeleton skeleton-card" style="min-width: 220px; height: 180px;"></div>
    <div class="skeleton skeleton-card" style="min-width: 100px; height: 180px; background: #333;"></div>
  </div>
</section>

<!-- New Highlights Section with Proxy (same as scoreboard) -->
<section id="new-highlights-section">
  <h2 style="font-size:1.2rem; font-weight:bold; color:#fff; margin:0 0 8px 15px;">Ashes & Big Bash</h2>
  <div class="scroll-container" id="newHighlightsContainer">
    <!-- Skeleton for new highlights -->
    <div class="skeleton skeleton-card" style="flex: 0 0 260px;"></div>
    <div class="skeleton skeleton-card" style="flex: 0 0 260px;"></div>
    <div class="skeleton skeleton-card" style="flex: 0 0 260px;"></div>
    <div class="skeleton skeleton-card" style="flex: 0 0 260px;"></div>
  </div>
</section>

<section id="highlights-section">
  <h2 style="font-size:1.2rem; font-weight:bold; color:#fff; margin:0 0 8px 15px;">Highlights</h2>
  <!-- Skeleton for highlights -->
  <div class="scroll-container skeleton-container" id="highlightContainer">
    <div class="skeleton skeleton-card" style="flex: 0 0 260px;"></div>
    <div class="skeleton skeleton-card" style="flex: 0 0 260px;"></div>
    <div class="skeleton skeleton-card" style="flex: 0 0 260px;"></div>
    <div class="skeleton skeleton-card" style="flex: 0 0 260px;"></div>
  </div>
</section>

<footer id="footer">
  <div class="footer-content">
    <p>&copy; 2025 Allrounder. All Rights Reserved.</p>
  </div>
</footer>

<div class="modal" id="channelModal">
  <div class="modal-content">
    <h3>Select Your Stream</h3>
    <div id="channelButtons"></div>
    <button class="close-btn" onclick="closeModal()">Close</button>
  </div>
</div>

<script>
const header = document.querySelector('header');
const slider = document.getElementById('posterSlider');
const sliderDots = document.getElementById('sliderDots');
const modal = document.getElementById('channelModal');
const channelContainer = document.getElementById('channelButtons');

let currentChannels = [], autoSlideInterval, currentSlide = 0, totalSlides = 0;
let userScrolling = false, userScrollingTimeout;
let userInteractedTimeout = null;

// Remove skeleton classes function
function removeSkeleton(element) {
  if (element && element.classList.contains('skeleton-container')) {
    element.classList.remove('skeleton-container');
  }
}

// Header scroll effect
window.addEventListener('scroll', ()=>{
  if(window.scrollY>50) header.classList.add('scrolled'); 
  else header.classList.remove('scrolled');
  userScrolling = true;
  clearTimeout(userScrollingTimeout);
  userScrollingTimeout = setTimeout(()=>{ userScrolling=false; },100);
});

// Parse poster.date + poster.start_time → IST Date object
function parsePosterDateTime(poster) {
  const parts = poster.date.split(" ");
  const day = parseInt(parts[0]);
  const monthNames = {
    "Jan":0,"Feb":1,"Mar":2,"Apr":3,"May":4,"Jun":5,
    "Jul":6,"Aug":7,"Sep":8,"Oct":9,"Nov":10,"Dec":11
  };
  const month = monthNames[parts[1]];
  const year = parseInt(parts[2]);

  let [hour, minute] = poster.start_time.split(":");
  let period = "AM";
  if (minute.includes(" ")) {
    [minute, period] = minute.split(" ");
  }
  hour = parseInt(hour);
  minute = parseInt(minute);
  if (period === "PM" && hour < 12) hour += 12;
  if (period === "AM" && hour === 12) hour = 0;

  return new Date(Date.UTC(year, month, day, hour - 5, minute - 30));
}

function isPosterLive(poster) {
  const now = new Date();
  const matchDateTime = parsePosterDateTime(poster);
  return now >= matchDateTime;
}

// Auto slide every 5 seconds
function startAutoSlide(){
  clearInterval(autoSlideInterval);
  autoSlideInterval = setInterval(()=>{
    if(!drag.isDragging && !userScrolling){
      currentSlide = (currentSlide + 1) % totalSlides;
      scrollToSlide(currentSlide);
    }
  },5000);
}

function scrollToSlide(index){
  const cards = slider.querySelectorAll('.poster-card');
  if(!cards.length) return;
  currentSlide = index;
  const sliderRect = slider.getBoundingClientRect();
  const cardRect = cards[currentSlide].getBoundingClientRect();
  const offset = cardRect.left - sliderRect.left - (sliderRect.width - cardRect.width)/2;
  slider.scrollLeft += offset;
  updateDots();
}

function updateDots(){
  const dots = sliderDots.querySelectorAll('.dot');
  dots.forEach((d,i)=>d.classList.toggle('active', i===currentSlide));
}

function createDots(count){
  sliderDots.innerHTML='';
  for(let i=0;i<count;i++){
    const dot = document.createElement('div');
    dot.className='dot';
    if(i===0) dot.classList.add('active');
    dot.addEventListener('click', ()=>{ 
      scrollToSlide(i); 
      pauseAutoSlideOnInteraction();
    });
    sliderDots.appendChild(dot);
  }
}

// Pause auto-slide 10 sec on interaction
function pauseAutoSlideOnInteraction(){
  clearInterval(autoSlideInterval);
  clearTimeout(userInteractedTimeout);
  userInteractedTimeout = setTimeout(startAutoSlide,10000);
}

// Smooth drag using requestAnimationFrame
const drag = { isDragging:false, startX:0, scrollLeft:0, rafId:null };
function dragMove(e){
  if(!drag.isDragging) return;
  const x = e.type.includes('touch') ? e.touches[0].pageX : e.pageX;
  const walk = drag.startX - x;
  if(drag.rafId) cancelAnimationFrame(drag.rafId);
  drag.rafId = requestAnimationFrame(()=>{ slider.scrollLeft = drag.scrollLeft + walk; });
}
slider.addEventListener('mousedown', e=>{ drag.isDragging=true; drag.startX=e.pageX; drag.scrollLeft=slider.scrollLeft; pauseAutoSlideOnInteraction(); });
slider.addEventListener('mousemove', dragMove);
slider.addEventListener('mouseup', ()=>{ drag.isDragging=false; });
slider.addEventListener('mouseleave', ()=>{ drag.isDragging=false; });
slider.addEventListener('touchstart', e=>{ drag.isDragging=true; drag.startX=e.touches[0].pageX; drag.scrollLeft=slider.scrollLeft; pauseAutoSlideOnInteraction(); });
slider.addEventListener('touchmove', dragMove);
slider.addEventListener('touchend', ()=>{ drag.isDragging=false; });

// Fetch posters
fetch('https://crickettv.site/main-poster.json')
  .then(res => res.json())
  .then(data => {
    // Remove skeleton from poster slider
    removeSkeleton(slider);
    slider.innerHTML = '';
    
    // Only take the first 3 posters
    const posters = data.posters.slice(0, 3); 
    totalSlides = posters.length;
    createDots(totalSlides);

    posters.forEach(poster => {
      const card = document.createElement('div');
      card.className = 'poster-card';
      const live = isPosterLive(poster);
      const btnLabel = live ? 'Watch Now' : 'Upcoming'; 

      card.innerHTML = `
        <img class="poster-img" src="${poster.poster_link}">
        <img class="title-img" src="${poster.title}">
        <div class="poster-meta-left">${poster.year} • ${poster.language} • ${poster.rating} • ${poster.category}</div>
        <button class="watch-btn">${btnLabel}</button>
      `;
      slider.appendChild(card);

      card.querySelector('.watch-btn').addEventListener('click', () => {
        if(live){ 
          currentChannels = poster.watch_now; 
          openModal(); 
        } else { 
          alert(`Match starts at ${poster.start_time} IST`); 
        }
      });
    });

    startAutoSlide();
  })
  .catch(err => {
    console.error('Error loading posters:', err);
  });

// Modal
function openModal(){
  channelContainer.innerHTML = '';
  currentChannels.forEach((c) => {
    const btn = document.createElement('button');
    btn.className = 'channel-btn';
    btn.textContent = c.name;
    btn.onclick = () => window.open(c.id, '_blank');
    channelContainer.appendChild(btn);
  });
  modal.classList.add('show');
  clearInterval(autoSlideInterval);
}

function closeModal(){
  modal.classList.remove('show');
  setTimeout(startAutoSlide,300);
}

async function fetchMatches() {
  try {
    const res = await fetch('https://cy-8i38.onrender.com/raw?url=https://m.cricbuzz.com/api/home');
    const data = await res.json();
    
    // Remove skeleton from matches section
    const matchesContainer = document.getElementById('matches');
    removeSkeleton(matchesContainer);
    
    renderMatches(data.matches);
    startAutoScroll();
  } catch(err) {
    console.error("Error fetching matches:", err);
    const matchesContainer = document.getElementById('matches');
    removeSkeleton(matchesContainer);
    matchesContainer.innerHTML = '<p style="color:#ccc; margin-left:15px;">Error fetching match data.</p>';
  }
}

function formatInnings(inn) { if (!inn) return ""; return `${inn.runs}/${inn.wickets || 0} (${inn.overs} ov)`; }

function renderMatches(matches) {
  const container = document.getElementById('matches');
  container.innerHTML = '';
  matches.forEach(item => {
    const m = item.match.matchInfo;
    const score = item.match.matchScore || {};
    const matchCard = document.createElement('div');
    matchCard.className = `match-card`;

    let team1Score = "Yet to Bat";
    let team2Score = "Yet to Bat";
    if (score.team1Score) { team1Score = formatInnings(score.team1Score.inngs1); if(score.team1Score.inngs2) team1Score += `<br>${formatInnings(score.team1Score.inngs2)}`; }
    if (score.team2Score) { team2Score = formatInnings(score.team2Score.inngs1); if(score.team2Score.inngs2) team2Score += `<br>${formatInnings(score.team2Score.inngs2)}`; }

    let statusClass = "upcoming", statusIcon = "schedule", statusText = m.stateTitle;
    if (m.state === "In Progress") { statusClass = "live"; statusIcon = "live_tv"; statusText = "LIVE NOW"; }
    else if (m.state === "Complete") { statusClass = "ended"; statusIcon = "emoji_events"; statusText = "Ended – " + m.status; }

    matchCard.innerHTML = `
      <div class="match-header">
        <div><strong>${m.seriesName}</strong></div>
        <div>${m.matchDesc}</div>
        <div class="status ${statusClass}"><span class="material-icons">${statusIcon}</span> ${statusText}</div>
      </div>
      <div class="teams">
        <div class="team">
          <img src="https://static.cricbuzz.com/a/img/v1/200x150/i1/c${m.team1.imageId}/${m.team1.teamName}.jpg" alt="${m.team1.teamName}">
          <div class="team-name">${m.team1.teamSName}</div>
          <div class="team-score">${team1Score}</div>
        </div>
        <div class="team">
          <img src="https://static.cricbuzz.com/a/img/v1/200x150/i1/c${m.team2.imageId}/${m.team2.teamName}.jpg" alt="${m.team2.teamName}">
          <div class="team-name">${m.team2.teamSName}</div>
          <div class="team-score">${team2Score}</div>
        </div>
      </div>
    `;
    container.appendChild(matchCard);
  });
}

// Auto-scroll with user-friendly pause
function startAutoScroll() {
  const container = document.getElementById('matches');
  const cardWidth = 280 + 15;
  let userScrolling = false, scrollTimeout;

  function scrollStep() {
    if (!userScrolling) {
      if (container.scrollLeft + container.clientWidth >= container.scrollWidth) {
        container.scrollTo({ left: 0, behavior: 'smooth' });
      } else {
        container.scrollBy({ left: cardWidth, behavior: 'smooth' });
      }
    }
  }

  const interval = setInterval(scrollStep, 10000);

  container.addEventListener('scroll', () => {
    userScrolling = true;
    clearTimeout(scrollTimeout);
    scrollTimeout = setTimeout(() => { userScrolling = false; }, 5000);
  });
}

fetchMatches();

const upcomingCarousel = document.getElementById('upcomingCarousel');
const upcomingApi = 'https://crickettv.site/upcomingevnets.json';

// Convert match date & time to IST Date object
function getISTDate(dateStr, timeStr) {
  const parts = dateStr.split(' ');
  const day = parseInt(parts[2]);
  const monthNames = {"Jan":0,"Feb":1,"Mar":2,"Apr":3,"May":4,"Jun":5,"Jul":6,"Aug":7,"Sep":8,"Oct":9,"Nov":10,"Dec":11};
  const month = monthNames[parts[1]];
  const year = parseInt(parts[3]);

  let [hour, minute] = timeStr.split(':');
  let period = 'AM';
  if (minute.includes(' ')) {
    [minute, period] = minute.split(' ');
  }
  hour = parseInt(hour);
  minute = parseInt(minute);
  if (period === 'PM' && hour < 12) hour += 12;
  if (period === 'AM' && hour === 12) hour = 0;

  return new Date(Date.UTC(year, month, day, hour - 5, minute - 30));
}

// Fetch upcoming matches
fetch(upcomingApi)
  .then(res => res.json())
  .then(data => {
    // Remove skeleton from upcoming carousel
    removeSkeleton(upcomingCarousel);
    upcomingCarousel.innerHTML = '';
    
    const now = new Date();
    data.upcomingMatches.forEach(match => {
      const matchDateTime = getISTDate(match.date, match.time);
      if (matchDateTime < now) return;

      const card = document.createElement('div');
      card.className = 'upcoming-card';
      card.innerHTML = `
        <img src="${match.poster}" alt="${match.title}">
        <div class="upcoming-gradient"></div>
        <div class="upcoming-info">
          <span class="teams">${match.team1} vs ${match.team2}</span>
          <span class="datetime">${match.date} | ${match.time}</span>
        </div>
        <div class="upcoming-overlay">
          <div class="title">${match.title}</div>
          <p>Venue: ${match.venue}</p>
          <p>Start: ${match.date} ${match.time}</p>
          <p>Teams: ${match.team1} vs ${match.team2}</p>
        </div>
      `;
      upcomingCarousel.appendChild(card);

      card.addEventListener('click', () => {
        card.classList.toggle('active');
      });

      const interval = setInterval(() => {
        if (matchDateTime <= new Date()) {
          card.remove();
          clearInterval(interval);
        }
      }, 30000);
    });
  })
  .catch(err => {
    console.error('Error fetching upcoming matches:', err);
    removeSkeleton(upcomingCarousel);
    upcomingCarousel.innerHTML = '<p style="color:#ccc; margin-left:15px;">Error loading upcoming matches.</p>';
  });

async function loadHighlights() {
  const url = "https://crictv.cricketstream745.workers.dev/?url=" +
    encodeURIComponent("https://acc-matchcentre.s3-ap-south-1.amazonaws.com/cpanel/client_14/2025/mediadoc/videos/1/videos.js?v=1758267404&callback=onVideos&_=1758303099872");

  try {
    const res = await fetch(url);
    const text = await res.text();
    const json = JSON.parse(text.replace(/^onVideos\(/, "").replace(/\);$/, ""));
    
    // Remove skeleton from highlights container
    const container = document.getElementById("highlightContainer");
    removeSkeleton(container);
    container.innerHTML = '';

    json.videos.forEach(video => {
      const card = document.createElement("div");
      card.className = "highlight-card";
      card.innerHTML = `
        <img src="${video.Image}" alt="${video.Title}">
        <div class="gradient"></div>
        <div class="highlight-title">${video.Title}</div>
      `;
      card.addEventListener("click", () => {
        window.location.href =
          "highlights/player.html?src=" + encodeURIComponent(video.MediaData.videos) +
          "&title=" + encodeURIComponent(video.Title);
      });
      container.appendChild(card);
    });
  } catch (e) {
    console.error("Error loading highlights:", e);
    const container = document.getElementById("highlightContainer");
    removeSkeleton(container);
    container.innerHTML = '<p style="color:#ccc; margin-left:15px;">Error loading highlights.</p>';
  }
}

loadHighlights();

// --- TODAY EVENTS SECTION ---
const todaySlider = document.getElementById("todayEventsSlider");
let todayInterval;

function todayStartAuto(){
  clearInterval(todayInterval);
  todayInterval=setInterval(()=>{
    if(!todaySlider.matches(":hover")){
      todaySlider.scrollBy({left:280, behavior:"smooth"});
      if(todaySlider.scrollLeft + todaySlider.clientWidth >= todaySlider.scrollWidth){
        todaySlider.scrollTo({left:0, behavior:"smooth"});
      }
    }
  },5000);
}

function loadTodayEvents(){
  fetch("https://crickettv.site/main-poster.json")
    .then(res=>res.json())
    .then(data=>{
      // Remove skeleton from today events slider
      removeSkeleton(todaySlider);
      todaySlider.innerHTML="";
      
      const liveEvents = [];
      const upcomingEvents = [];

      data.posters.forEach(poster=>{
        const live = isPosterLive(poster);
        if(live) liveEvents.push({...poster, live:true});
        else upcomingEvents.push({...poster, live:false});
      });

      // If live exists -> only show live, else show upcoming
      const eventsToShow = liveEvents.length ? liveEvents : upcomingEvents;

      eventsToShow.forEach(ev=>{
        const card=document.createElement("div");
        card.className="poster-card";
        card.innerHTML=`<img src="${ev.poster_link}" alt="event">`;

        if(ev.live){
          const liveTag=document.createElement("div");
          liveTag.className="live-indicator";
          liveTag.textContent="LIVE";
          card.appendChild(liveTag);

          card.addEventListener("click", ()=>{
            currentChannels = ev.watch_now;
            openModal();
          });

        } else {
          card.addEventListener("click", ()=>{
            alert("Match not live yet. Please check back later.");
          });
        }

        todaySlider.appendChild(card);
      });

      todayStartAuto();
    })
    .catch(err => {
      console.error('Error loading today events:', err);
      removeSkeleton(todaySlider);
      todaySlider.innerHTML = '<p style="color:#ccc; margin-left:15px;">Error loading today events.</p>';
    });
}

loadTodayEvents();
 
// Fancode Section
let fancodeShowingAll = false;

async function loadFancodeMatches() {
  try {
    const res = await fetch('https://raw.githubusercontent.com/Odfinity/live-events/refs/heads/main/fancode/data.json');
    const data = await res.json();
    
    // Remove skeleton from fancode container
    const container = document.getElementById('fancodeContainer');
    removeSkeleton(container);
    
    renderFancodeMatches(data.matches || []);
  } catch(err) {
    console.error("Error loading Fancode matches:", err);
    const container = document.getElementById('fancodeContainer');
    removeSkeleton(container);
    container.innerHTML = '<p style="color:#ccc; margin-left:15px;">Failed to load matches.</p>';
  }
}

function renderFancodeMatches(matches) {
  const container = document.getElementById('fancodeContainer');
  container.innerHTML = '';
  
  const matchesToShow = fancodeShowingAll ? matches : matches.slice(0, 10);
  
  if (matchesToShow.length === 0) {
    container.innerHTML = '<p style="color:#ccc; margin-left:15px;">No matches available at the moment.</p>';
    return;
  }
  
  matchesToShow.forEach((match, index) => {
    const card = document.createElement('div');
    card.className = 'card';
    
    const isLive = match.status && match.status.toLowerCase() === 'live';
    const isPremium = match.premium || false;
    
    card.innerHTML = `
      <img src="${match.src || 'https://via.placeholder.com/220x124/222/fff?text=No+Image'}" alt="${match.match_name || 'Match'}">
      ${isLive ? '<div class="live-badge">LIVE</div>' : ''}
      ${isPremium ? '<div class="premium-badge">PREMIUM</div>' : ''}
      <div class="card-title">${match.match_name || 'Upcoming Match'}</div>
    `;
    
    card.addEventListener('click', () => {
      if (isLive && (match.dai_url || match.adfree_url)) {
        const url = encodeURIComponent(match.dai_url || match.adfree_url);
        window.location.href = `fancode/player.html?url=${url}&matchName=${encodeURIComponent(match.match_name)}`;
      } else {
        alert(match.startTime ? 
          `Match starts at ${match.startTime} IST. Check back later.` : 
          'Match details not available.');
      }
    });
    
    container.appendChild(card);
  });
  
  if (matches.length > 10) {
    const viewAll = document.createElement('div');
    viewAll.className = 'view-all-card';
    viewAll.textContent = fancodeShowingAll ? 'Show Less' : 'View All';
    viewAll.addEventListener('click', () => {
      fancodeShowingAll = !fancodeShowingAll;
      renderFancodeMatches(matches);
    });
    container.appendChild(viewAll);
  }
}

loadFancodeMatches();

// New Highlights Section with Premium UI
let newHighlightsOffset = 0;
let newHighlightsLoading = false;
let newHighlightsTotal = Infinity;
let newHighlightsLoaded = 0;

async function loadNewHighlights() {
  if (newHighlightsLoading) return;
  
  try {
    newHighlightsLoading = true;
    const container = document.getElementById('newHighlightsContainer');
    
    // Remove skeleton cards on first load
    if (newHighlightsOffset === 0) {
      const skeletonCards = container.querySelectorAll('.skeleton');
      skeletonCards.forEach(card => card.remove());
      
      const existingLoadMore = container.querySelector('.load-more-card');
      if (existingLoadMore) existingLoadMore.remove();
    }
    
    const limit = 10;
    const url = `https://cricket-australia-highlights.cricketstream745.workers.dev/videos?offset=${newHighlightsOffset}&limit=${limit}`;
    
    
    const res = await fetch(proxyUrl);
    const data = await res.json();
    
    if (!data.content || data.content.length === 0) {
      if (newHighlightsOffset === 0) {
        container.innerHTML = '<p style="color:#ccc; margin-left:15px; padding:20px; text-align:center;">No highlights available at the moment.</p>';
      } else {
        const loadMoreCard = container.querySelector('.load-more-card');
        if (loadMoreCard) loadMoreCard.remove();
      }
      return;
    }
    
    newHighlightsLoaded += data.content.length;
    
    data.content.forEach(video => {
      const card = document.createElement('div');
      card.className = 'highlight-card';
      card.innerHTML = `
        <img src="${video.thumbnailUrl}" alt="${video.title}" loading="lazy">
        <div class="gradient"></div>
        <div class="highlight-title">${video.title}</div>
      `;
      
      card.addEventListener('click', () => {
        window.location.href = `highlights/player2.html?id=${video.mediaId}&title=${encodeURIComponent(video.title)}`;
      });
      
      container.appendChild(card);
    });
    
    newHighlightsOffset += limit;
    
    const existingLoadMore = container.querySelector('.load-more-card');
    if (existingLoadMore) existingLoadMore.remove();
    
    // Add premium Load More card
    const loadMoreCard = document.createElement('div');
    loadMoreCard.className = 'highlight-card load-more-card';
    loadMoreCard.innerHTML = `
      <div style="text-align:center; padding:20px;">
        <div class="load-more-icon">↻</div>
        <div class="load-more-text">Load More</div>
        <div class="load-more-subtext">${newHighlightsLoaded} highlights loaded</div>
      </div>
    `;
    
    loadMoreCard.addEventListener('click', () => {
      loadMoreCard.innerHTML = `
        <div style="text-align:center; padding:20px;">
          <div style="font-size:1rem; margin-bottom:8px; color:#38bdf8;">Loading...</div>
          <div style="font-weight:600; font-size:0.8rem; color:#94a3b8;">Fetching more highlights</div>
        </div>
      `;
      setTimeout(() => loadNewHighlights(), 800);
    });
    
    container.appendChild(loadMoreCard);
    
  } catch(err) {
    console.error("Error loading new highlights:", err);
    const container = document.getElementById('newHighlightsContainer');
    
    if (newHighlightsOffset === 0) {
      container.innerHTML = '<p style="color:#ccc; margin-left:15px; padding:20px; text-align:center;">Error loading highlights. Please try again.</p>';
    } else {
      const loadMoreCard = container.querySelector('.load-more-card');
      if (loadMoreCard) {
        loadMoreCard.innerHTML = `
          <div style="text-align:center; padding:20px; color:#ff6b6b;">
            <div style="font-size:1rem; margin-bottom:8px;">Failed To Load</div>
            <div style="font-weight:600; font-size:0.8rem;">Click to retry</div>
          </div>
        `;
        
        loadMoreCard.addEventListener('click', () => {
          loadNewHighlights();
        }, { once: true });
      }
    }
  } finally {
    newHighlightsLoading = false;
  }
}

// Load new highlights after page loads
window.addEventListener('load', () => {
  setTimeout(loadNewHighlights, 1000);
});
</script>

</body>
</html>
